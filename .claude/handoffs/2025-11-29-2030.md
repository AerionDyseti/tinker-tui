# Handoff - Tinker-UI

**Date:** 2025-11-29 20:30 (updated 22:00) | **Branch:** master

## Summary

Major naming refactor in progress: SessionEntry → SessionArtifact, ConversationService → ActiveSession. Pivoted from TUI to React web frontend. **Project renamed from tinker-tui → tinker-ui**. **Configured project-local MCP storage for portability between Gallifrey (laptop) and Krypton (desktop).**

## Completed

- Created `src/domain/artifact.ts` with new SessionArtifact types
- Split ToolInvocation into separate ToolUse and ToolResult
- Added CompletionStatus ("complete" | "token_limit" | "user_interrupted")
- Added provider/model/status fields to AgentResponse
- Created `src/application/active-session.ts` (replaces ConversationService)
- Updated domain layer: context.ts, provider.ts, session.ts
- Updated infrastructure: assembler.ts, debug.ts, openrouter.ts
- Updated web server to use ActiveSession
- Removed TUI code, solid-js dependencies
- Web frontend spike working (React + Bun.serve())
- **Deleted `src/tui/` directory** (remnant experimental files)
- **Project rename tinker-tui → tinker-ui** in all files
- Ran `bun install` to update lock file
- Cleared `.serena/memories/` for regeneration with new direction
- **Configured project-local MCP storage:**
  - Created `.claude/settings.json` with project-level MCP servers
  - vector-memory-mcp: `VECTOR_MEMORY_DB_PATH` → `.agents/vector-memories.db`
  - Serena: Already project-local (`.serena/memories/`)
  - context7: Added for library docs

## In Progress

- Persistence layer refactor (schema.ts, project-storage.ts)

## Blocked

- None

## Next

1. **Commit all pending changes** (rename, MCP config, deleted memories)
2. **Restart Claude Code** to pick up new MCP server configuration
3. **Run Serena onboarding** to regenerate project memories
4. Update persistence layer:
   - `schema.ts` - rename messagesSchema → artifactsSchema
   - `project-storage.ts` - handle new artifact types
5. Run `bun test` and `bun run typecheck`

## Project Portability Setup

The repo is now configured for seamless switching between machines:

```
.agents/vector-memories.db    # Shared vector memories (git tracked)
.serena/memories/             # Serena memories (git tracked)
.claude/settings.json         # Project MCP servers (git tracked)
.claude/settings.local.json   # Local-only permissions (gitignored)
```

**To sync:** Just `git pull` on the other machine. MCP servers will use project-local storage.

## Memory IDs

- d0cac76d-4399-4c4e-86a5-b1109d63c0d5 (decision: naming refactor)
- 14b22cf3-92e5-47fb-96c8-603d84d476e5 (decision: web pivot)
- a5c301e1-5ccb-488c-a2cb-92842f0b31ad (implementation: files changed)
- 543237ef-e0f5-42bb-b6da-f292bc497cf2 (next-step: persistence layer)
- 8cd04644-3b95-44b5-8da9-20a4fc493ac2 (insight: domain types for UI apps)
- e2e3dbea-a74e-4640-9ff4-8818f3a9d1b1 (decision: project rename tinker-tui → tinker-ui)
